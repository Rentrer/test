<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>观察者网新闻列表</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="static/assets/img/favicon.png" rel="icon">
  <link href="static/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,600,600i,700,700i,900" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="static/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="static/assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="static/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="static/assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="static/assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="static/assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="static/assets/css/style.css" rel="stylesheet">

  <style>
    /* 分页样式优化 */
    .pagination {
      display: flex;
      justify-content: center;
      margin-top: 20px;
    }
    .pagination a, .pagination .current {
      color: #333;
      float: left;
      padding: 8px 16px;
      text-decoration: none;
      transition: background-color .3s;
      border: 1px solid #ddd;
      margin: 0 4px;
      border-radius: 4px;
    }
    .pagination a:hover:not(.active) {
      background-color: #ddd;
    }
    .pagination .current {
      background-color: #007bff;
      color: white;
      border: 1px solid #007bff;
    }
    .pagination .disabled {
      color: #999;
      border: 1px solid #ddd;
      padding: 8px 16px;
      margin: 0 4px;
      border-radius: 4px;
    }
    
    /* 控制面板样式优化 */
    .control-panel {
      background: #f8f9fa;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 0 15px rgba(0,0,0,0.05);
    }
    
    /* 表格样式优化 */
    .news-table {
      border-collapse: separate;
      border-spacing: 0;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 0 15px rgba(0,0,0,0.05);
    }
    .news-table thead th {
      background-color: #0080ff;
      color: white;
      font-weight: 600;
      border: none;
    }
    .news-table tbody tr:hover {
      background-color: #f1f9ff;
    }
    .news-table a {
      color: #007bff;
      text-decoration: none;
      font-weight: 500;
    }
    .news-table a:hover {
      text-decoration: underline;
    }
    
    /* 控制元素样式 */
    .control-element {
      display: flex;
      align-items: center;
      margin-bottom: 10px;
    }
    .control-element label {
      margin-right: 10px;
      font-weight: 600;
      min-width: 80px;
    }
    .control-element select, .control-element button {
      padding: 8px 15px;
      border-radius: 4px;
      border: 1px solid #ccc;
      background-color: white;
    }
    .control-element select:focus, .control-element button:focus {
      border-color: #007bff;
      outline: none;
    }
    
    /* 排序按钮样式 */
    .sort-btn {
      display: inline-block;
      padding: 8px 15px;
      border-radius: 4px;
      margin-left: 10px;
      cursor: pointer;
      border: 1px solid #ddd;
      background-color: white;
      transition: all 0.3s;
    }
    .sort-btn:hover {
      background-color: #f0f0f0;
    }
    .sort-btn.active {
      background-color: #007bff;
      color: white;
      border-color: #007bff;
    }
    
    /* 统计和说明文字 */
    .stats-text {
      color: #666;
      font-size: 0.9rem;
    }
    
    /* 标题加强 */
    .section-title h2 {
      color: #333;
      position: relative;
      padding-bottom: 10px;
    }
    .section-title h2:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 50px;
      height: 3px;
      background: #007bff;
    }
    
    /* 关键词标签样式 */
    .keyword-tag {
      display: inline-block;
      background: #e9f5ff;
      color: #007bff;
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 0.85em;
      margin: 2px;
    }
  </style>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="container">

      <div class="logo float-left">
        <h1 class="text-light"><a href="/index"><span>Shichen Li</span></a></h1>
        <!-- Uncomment below if you prefer to use an image logo -->
        <!-- <a href="temp.html"><img src="static1/assets/img/logo.png" alt="" class="img-fluid"></a>-->
      </div>

      <nav class="nav-menu float-right d-none d-lg-block">
        <ul>
          <li class="active"><a href="/index">首页<i class="la la-angle-down"></i></a></li>
          <li><a href="/news">新闻</a></li>
          <li><a href="/analysis">词频可视化</a></li>
          <li><a href="/word">词云</a></li>
            <li><a href="/search">搜索</a></li>

        </ul>
      </nav><!-- .nav-menu -->

    </div>
  </header><!-- End Header -->

  <!-- ======= News Section ======= -->
  <section id="news" class="team section-bg" style="padding: 80px 0;">
    <div class="container" data-aos="fade-up">

      <div class="section-title">
        <h2>观察者网新闻列表</h2>
        <p>探索最新的新闻与洞察</p>
      </div>

      <div class="control-panel">
        <div class="row">
          <div class="col-md-4">
            <div class="control-element">
              <label>排序方式:</label>
              <button class="sort-btn {% if pagination.sort == 'newest' %}active{% endif %}" 
                      onclick="changeSort('newest')">
                <i class="icofont-arrow-down"></i> 最新发布
              </button>
              <button class="sort-btn {% if pagination.sort == 'oldest' %}active{% endif %}" 
                      onclick="changeSort('oldest')">
                <i class="icofont-arrow-up"></i> 最早发布
              </button>
            </div>
          </div>
          <div class="col-md-4">
            <div class="control-element">
              <label>每页显示:</label>
              <select id="per-page-selector" onchange="changePerPage(this.value)">
                <option value="10" {% if pagination.per_page == 10 %}selected{% endif %}>10条</option>
                <option value="20" {% if pagination.per_page == 20 %}selected{% endif %}>20条</option>
                <option value="50" {% if pagination.per_page == 50 %}selected{% endif %}>50条</option>
              </select>
            </div>
          </div>
          <div class="col-md-4">
            <div class="stats-text text-right">
              共 {{ pagination.total_count }} 条新闻，
              当前显示第 {{ (pagination.page - 1) * pagination.per_page + 1 }} - 
              {{ (pagination.page - 1) * pagination.per_page + news|length }} 条
            </div>
          </div>
        </div>
      </div>

      <div class="table-responsive">
        <table class="table table-striped table-hover news-table">
          <thead>
            <tr>
              <th width="5%">编号</th>
              <th width="45%">标题</th>
              <th width="15%">作者</th>
              <th width="15%">发布时间</th>
              <th width="20%">关键字</th>
            </tr>
          </thead>
          <tbody>
            {% for new in news %}
            <tr>
              <td>{{new[0]}}</td>
              <td>
                <a href="{{ new[5] }}" target="_blank" title="{{ new[1] }}">
                  {{ new[1]|truncate(50) }}
                </a>
              </td>
              <td>{{new[2]}}</td>
              <td>{{new[3]}}</td>
              <td>
                {% if new[6] %}
                  {% for keyword in new[6].split(',')[:3] %}
                    <span class="keyword-tag">{{ keyword.strip() }}</span>
                  {% endfor %}
                {% endif %}
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>

      <!-- 分页导航 -->
      <div class="pagination">
        {% if pagination.page > 1 %}
          <a href="{{ url_for('news_page', page=1, per_page=pagination.per_page, sort=pagination.sort) }}">&laquo; 首页</a>
          <a href="{{ url_for('news_page', page=pagination.page-1, per_page=pagination.per_page, sort=pagination.sort) }}">&lt; 上一页</a>
        {% else %}
          <span class="disabled">&laquo; 首页</span>
          <span class="disabled">&lt; 上一页</span>
        {% endif %}
        
        {% set start_page = pagination.page - 2 if pagination.page > 2 else 1 %}
        {% set end_page = start_page + 4 if start_page + 4 <= pagination.total_pages else pagination.total_pages %}
        {% if start_page > 1 %}
          <span class="disabled">...</span>
        {% endif %}
        
        {% for p in range(start_page, end_page + 1) %}
          {% if p == pagination.page %}
            <span class="current">{{ p }}</span>
          {% else %}
            <a href="{{ url_for('news_page', page=p, per_page=pagination.per_page, sort=pagination.sort) }}">{{ p }}</a>
          {% endif %}
        {% endfor %}
        
        {% if end_page < pagination.total_pages %}
          <span class="disabled">...</span>
        {% endif %}
        
        {% if pagination.page < pagination.total_pages %}
          <a href="{{ url_for('news_page', page=pagination.page+1, per_page=pagination.per_page, sort=pagination.sort) }}">&gt; 下一页</a>
          <a href="{{ url_for('news_page', page=pagination.total_pages, per_page=pagination.per_page, sort=pagination.sort) }}">末页 &raquo;</a>
        {% else %}
          <span class="disabled">&gt; 下一页</span>
          <span class="disabled">末页 &raquo;</span>
        {% endif %}
      </div>
      
    </div>
  </section><!-- End News Section -->

  <!-- ======= Footer ======= -->
  <footer id="footer">


    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>Shichen Li</span></strong>. All Rights Reserved
      </div>
    
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="static/assets/vendor/jquery/jquery.min.js"></script>
  <script src="static/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="static/assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="static/assets/vendor/php-email-form/validate.js"></script>
  <script src="static/assets/vendor/jquery-sticky/jquery.sticky.js"></script>
  <script src="static/assets/vendor/venobox/venobox.min.js"></script>
  <script src="static/assets/vendor/waypoints/jquery.waypoints.min.js"></script>
  <script src="static/assets/vendor/counterup/counterup.min.js"></script>
  <script src="static/assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="static/assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="static/assets/js/main.js"></script>

  <!-- 添加排序和分页控制的JavaScript -->
  <script>
    function changePerPage(perPage) {
      var url = new URL(window.location.href);
      url.searchParams.set('per_page', perPage);
      url.searchParams.set('page', 1); // 切换每页条数时重置为第一页
      window.location.href = url.toString();
    }
    
    function changeSort(sortBy) {
      var url = new URL(window.location.href);
      url.searchParams.set('sort', sortBy);
      window.location.href = url.toString();
    }
  </script>

</body>

</html>